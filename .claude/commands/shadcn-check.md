# shadcn/ui Compliance Check

Activate shadcn-compliance persona from `.claude/agents/shadcn-compliance.md`.

Perform a rule-based compliance check of the codebase against shadcn/ui design system standards. Read source files, grep for violations, and use Playwright MCP to verify runtime behavior.

## Check Sections

### 1. Component Usage

Scan all files in `src/components/` (excluding `src/components/ui/`) and `src/App.tsx` for:

- **Raw HTML elements** — `<button>`, `<input>`, `<select>`, `<table>`, `<dialog>` used directly instead of shadcn components (`Button`, `Input`, `Select`, `Table`, `Dialog`)
- **Incorrect variant values** — `Button` accepts: `default`, `destructive`, `outline`, `secondary`, `ghost`, `link`. Flag unknown variants.
- **Incorrect size values** — `Button` accepts: `default`, `xs`, `sm`, `lg`, `icon`, `icon-xs`, `icon-sm`, `icon-lg`. Flag unknown sizes.
- **Missing `asChild` pattern** — wrapping a link inside `Button` without `asChild`, or other Radix composition errors

### 2. Design Tokens

Grep for hardcoded color values that bypass the token system:

- **Hardcoded Tailwind colors** — `bg-gray-*`, `text-blue-*`, `border-red-*`, `bg-slate-*`, `text-zinc-*`, etc. Should use semantic tokens: `bg-muted`, `text-foreground`, `bg-primary`, `text-muted-foreground`, `border-border`, etc.
- **Hex/RGB/HSL literals** — `bg-[#...]`, `text-[#...]`, `border-[rgb(...)]` — completely outside the token system
- **Hardcoded border-radius** — `rounded-[4px]`, `rounded-md` where `rounded-sm` or token values should be used
- **Hardcoded shadows** — raw `shadow-[...]` instead of design token shadows
- **Note:** files in `src/components/ui/` are generated by shadcn and should be excluded from this check

### 3. Pattern Compliance

Check code patterns across `src/components/` (excluding `ui/`):

- **`cn()` usage** — flag any `className` that uses template literals (`` className={`...`} ``) or ternaries (`className={condition ? "a" : "b"}`) without wrapping in `cn()`. Correct: `className={cn("base", condition && "extra")}`
- **`data-state` usage** — row selection and togglable UI should use `data-state="selected"` / `data-state="open"` rather than conditional class injection
- **Import paths** — all component imports must use `@/components/ui/...` alias, not relative paths like `../../ui/button`
- **`import type`** — type-only imports must use `import type { ... }` (enforced by `verbatimModuleSyntax`)

### 4. Visual Verification (Playwright MCP)

Start the dev server (`npm run dev`) if not already running, then:

- **Navigate** to `http://localhost:5173/new-uxd-test/`
- **`browser_snapshot`** — verify ARIA roles: checkboxes have `role="checkbox"`, buttons have `role="button"`, dropdown menus have proper ARIA
- **`browser_evaluate`** — run `document.querySelectorAll('[data-slot]')` and list all data-slot values found. Compare against expected shadcn components: `table`, `table-header`, `table-body`, `table-row`, `table-head`, `table-cell`, `button`, `checkbox`, `badge`, `dropdown-menu`, `tabs`, `tabs-list`, `tabs-trigger`
- **Interactive checks** — click a sort header (verify it works), open a dropdown menu (verify it opens), toggle a checkbox (verify state change)

### 5. Anti-Patterns

Scan for common violations:

- **Inline `style={{}}`** — flag all inline styles except TanStack Table column width/sizing styles (these are acceptable)
- **`!important` / Tailwind `!` prefix** — `!text-white`, `!bg-red-500` etc. — never acceptable
- **Raw HTML that should be shadcn** — `<a>` that should be a `Button` with `asChild`, `<div>` acting as a button (has onClick but no role/keyboard handling)
- **Duplicate class strings** — identical long className strings repeated across multiple files (should be extracted to a component or cn() helper)
- **Unused shadcn components** — files in `src/components/ui/` that are never imported anywhere in the app

### 6. Configuration

Verify project configuration files:

- **`components.json`** — must have `style: "new-york"`, `tsx: true`, correct aliases (`@/components`, `@/lib/utils`, `@/hooks`)
- **`src/index.css`** — must contain all required CSS variables: `--background`, `--foreground`, `--card`, `--card-foreground`, `--popover`, `--popover-foreground`, `--primary`, `--primary-foreground`, `--secondary`, `--secondary-foreground`, `--muted`, `--muted-foreground`, `--accent`, `--accent-foreground`, `--destructive`, `--border`, `--input`, `--ring`, `--radius`, `--sidebar-*` (if sidebar used)
- **Tailwind v4 patterns** — confirm `@import "tailwindcss"` is present, `@theme inline` block exists with token definitions

## Output Format

```
## shadcn/ui Compliance Report

### Summary

| Category | Pass | Fail | Critical | Major | Minor |
|----------|------|------|----------|-------|-------|
| Component Usage | | | | | |
| Design Tokens | | | | | |
| Pattern Compliance | | | | | |
| Visual Verification | | | | | |
| Anti-Patterns | | | | | |
| Configuration | | | | | |

### Findings

#### [Critical] Finding Title
**File:** `src/components/ObjectTable/ObjectTable.tsx:42`
**Current:** `<button className="bg-blue-500">Delete</button>`
**Fix:** `<Button variant="destructive">Delete</Button>`
**Rule:** Composition over customization — use shadcn primitives

(repeat for each finding)

### Compliance Score

**Grade: X** (A = 0 criticals + ≤2 majors, B = 0 criticals + ≤5 majors, C = ≤2 criticals, D = ≤5 criticals, F = 6+ criticals)

### Top 3 Priority Fixes

1. ...
2. ...
3. ...
```

$ARGUMENTS
